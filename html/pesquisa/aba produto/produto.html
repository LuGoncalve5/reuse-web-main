<!-- produto.html -->
<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detalhes da Peça</title>
    <link rel="stylesheet" href="../../../css/padrao.css">
    <link rel="stylesheet" href="produto.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
</head>
<body>
    <div class="sidebar">
        <img class="logo" src="../../../img/logoreuse.png">
        <a href="../../closet/closet.html"><i class="bi bi-house-door"></i><span>Meu Closet</span></a>
        <a href="../../pesquisa/aba pesquisa/pesquisa.html"><i class="bi bi-search"></i><span>Pesquisa</span></a>
        <a href="../../cadastro closet/cadastro peca/cadastroPeca.html"><i class="bi bi-plus-square"></i><span>Novo cadastro</span></a>
        <a href="../../doacao/doacoes.html"><i class="bi bi-gift"></i><span>Doações</span></a>
        <a href="../../meu perfil/mp_cpf_venda.html"><i class="bi bi-person"></i><span>Meu Perfil</span></a>
    </div>

    <div class="content">
        <section class="produto-detalhe">
            <a onclick="history.back()" class="voltar"><i class="bi bi-arrow-left"></i></a>

            <div class="vendedor-info" role="link" tabindex="0" style="cursor:pointer;"
                 onclick="redirectToOwner()"
                 onkeydown="if (event.key === 'Enter' || event.key === ' ') { event.preventDefault(); redirectToOwner(); }">
                <img id="fotoPerfilVendedor" class="foto-vendedor">
                <script>
                    function getOwnerUidFromUrl() {
                        try {
                            const params = new URLSearchParams(window.location.search);
                            return params.get('idUsuario') || '';
                        } catch (e) {
                            return '';
                        }
                    }
                    function redirectToOwner() {
                        const idUsuario = getOwnerUidFromUrl();
                        const base = '../aba usuario/pesquisa_perfil.html';
                        const url = idUsuario ? `${base}?idUsuario=${encodeURIComponent(idUsuario)}` : base;
                        location.href = url;
                    }
                </script>
                <div>
                    <h2 id="nomeVendedor" class="nome-vendedor">
                        Carregando...
                        <span class="rating-stars">
                            <i class="bi bi-star-fill"></i>
                            <i class="bi bi-star-fill"></i>
                            <i class="bi bi-star-fill"></i>
                            <i class="bi bi-star-fill"></i>
                            <i class="bi bi-star-fill"></i>
                        </span>
                    </h2>
                    <p id="userVendedor" class="user">@carregando...</p>
                    <p class="post-date"><i class="bi bi-calendar3"></i> 23 de outubro de 2025</p>
                </div>
            </div>

            <div class="card-produto">
                <div class="favoritar-btn">
                    <i class="bi bi-heart"></i>
                </div>
                <img id="fotoProduto" class="img-produto">
                <div class="descricao-produto">
                    <h1 id="tituloProduto" class="titulo">Carregando...</h1>
                    <p id="precoProduto" class="preco">R$ 00,00</p>
                    <p id="descricaoProduto" class="info">Carregando...</p>
                    <button class="btn-comprar" onclick="window.location.href='compra/compra.html'">Comprar</button>
                </div>
            </div>
        </section>
    </div>

    <script>
        const botaoFavoritar = document.querySelector('.favoritar-btn');
        const iconeFavoritar = botaoFavoritar.querySelector('i');

         botaoFavoritar.addEventListener('click', () => {
             // 1. Troca o estado do botão
             botaoFavoritar.classList.toggle('favoritado');

             // 2. Troca o ícone de coração (vazio/cheio)
            if (botaoFavoritar.classList.contains('favoritado')) {
                iconeFavoritar.classList.remove('bi-heart');
                iconeFavoritar.classList.add('bi-heart-fill');
                console.log("Item Favoritado!");
            } else {
                iconeFavoritar.classList.remove('bi-heart-fill');
                iconeFavoritar.classList.add('bi-heart');
                console.log("Item Desfavoritado.");
            }
        });
    </script>

    <script type="module" src="produto.js"></script>

</body>
</html>
